"use strict";(self.webpackChunkrocketmq_docs=self.webpackChunkrocketmq_docs||[]).push([[9461],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>g});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},l="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),l=p(n),m=a,g=l["".concat(s,".").concat(m)]||l[m]||u[m]||o;return n?r.createElement(g,i(i({ref:t},d),{},{components:n})):r.createElement(g,i({ref:t},d))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[l]="string"==typeof e?e:a,i[1]=c;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},95389:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>p});var r=n(87462),a=(n(67294),n(3905));const o={},i="RocketMQ EventBridge Quick Start",c={unversionedId:"eventbridge/03RocketMQEventBridgeQuickStart",id:"version-5.0/eventbridge/03RocketMQEventBridgeQuickStart",title:"RocketMQ EventBridge Quick Start",description:"RocketMQ EventBridge requires a message service to store events and a runtime to subscribe and push events. In this case, we choose Apache RocketMQ as our message service and Apache RocketMQ Connect as our runtime for subscribing and pushing events. Of course, you can also choose other message services instead, EventBridge does not impose any restrictions on this. In the future, EventBridge also plans to implement its own runtime based on OpenMessaging Connect API in order to better provide event-driven services.",source:"@site/i18n/en/docusaurus-plugin-content-docs/version-5.0/07-eventbridge/03RocketMQEventBridgeQuickStart.md",sourceDirName:"07-eventbridge",slug:"/eventbridge/03RocketMQEventBridgeQuickStart",permalink:"/docs/eventbridge/03RocketMQEventBridgeQuickStart",draft:!1,editUrl:"https://github.com/apache/rocketmq-site/tree/new-official-website/versioned_docs/version-5.0/07-eventbridge/03RocketMQEventBridgeQuickStart.md",tags:[],version:"5.0",frontMatter:{},sidebar:"version-5.0/myAutogeneratedSidebar",previous:{title:"RocketMQ EventBridge Overview",permalink:"/docs/eventbridge/02RocketMQEventBridgeOverview"},next:{title:"RocketMQ MQTT Overview",permalink:"/docs/mqtt/01RocketMQMQTTOverview"}},s={},p=[{value:"Deploy Apache RocketMQ",id:"deploy-apache-rocketmq",level:2},{value:"Deploy Apache RocketMQ Connect",id:"deploy-apache-rocketmq-connect",level:2},{value:"Deploy RocketMQ EventBridge",id:"deploy-rocketmq-eventbridge",level:2},{value:"Demo",id:"demo",level:2}],d={toc:p},l="wrapper";function u(e){let{components:t,...o}=e;return(0,a.kt)(l,(0,r.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"rocketmq-eventbridge-quick-start"},"RocketMQ EventBridge Quick Start"),(0,a.kt)("p",null,"RocketMQ EventBridge requires a message service to store events and a runtime to subscribe and push events. In this case, we choose Apache RocketMQ as our message service and Apache RocketMQ Connect as our runtime for subscribing and pushing events. Of course, you can also choose other message services instead, EventBridge does not impose any restrictions on this. In the future, EventBridge also plans to implement its own runtime based on OpenMessaging Connect API in order to better provide event-driven services."),(0,a.kt)("p",null,"System requirements:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"64-bit operating system, Linux/Unix/macOS is recommended"),(0,a.kt)("li",{parentName:"ul"},"64-bit JDK 1.8+")),(0,a.kt)("h2",{id:"deploy-apache-rocketmq"},"Deploy Apache RocketMQ"),(0,a.kt)("p",null,"Apache RocketMQ is a great message service and we choose it as the default storage for EventBus. You can quickly deploy it according to this manual: ",(0,a.kt)("a",{parentName:"p",href:"https://rocketmq.apache.org/docs/quick-start/"},"Apache RocketMQ Quick Start")),(0,a.kt)("h2",{id:"deploy-apache-rocketmq-connect"},"Deploy Apache RocketMQ Connect"),(0,a.kt)("p",null,"We use Apache RocketMQ Connect as our default runtime to connect to external upstream and downstream services. You can complete the deployment according to the manual: ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/apache/rocketmq-connect"},"RocketMQ Connect Quick Start"),'. Before deploying Apache RocketMQ Connect, you should download the following plugins and put them in the directory defined by the "pluginPaths" configuration parameter in rocketmq-connect.'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://cn-hangzhou-eventbridge.oss-cn-hangzhou.aliyuncs.com/rocketmq-connect-eventbridge-0.0.1-SNAPSHOT-jar-with-dependencies.jar"},"rocketmq-connect-eventbridge-jar-with-dependencies.jar")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://cn-hangzhou-eventbridge.oss-cn-hangzhou.aliyuncs.com/rocketmq-connect-dingtalk-1.0-SNAPSHOT-jar-with-dependencies.jar"},"rocketmq-connect-dingtalk-jar-with-dependencies.jar")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://cn-hangzhou-eventbridge.oss-cn-hangzhou.aliyuncs.com/connect-cloudevent-transform-1.0.0-SNAPSHOT-jar-with-dependencies.jar"},"connect-cloudevent-transform-jar-with-dependencies.jar")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://cn-hangzhou-eventbridge.oss-cn-hangzhou.aliyuncs.com/connect-filter-transform-1.0.0-SNAPSHOT-jar-with-dependencies.jar"},"connect-filter-transform-jar-with-dependencies.jar")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://cn-hangzhou-eventbridge.oss-cn-hangzhou.aliyuncs.com/connect-eventbridge-transform-1.0.0-SNAPSHOT-jar-with-dependencies.jar"},"connect-eventbridge-transform-jar-with-dependencies.jar"))),(0,a.kt)("h2",{id:"deploy-rocketmq-eventbridge"},"Deploy RocketMQ EventBridge"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Download EventBridge"),(0,a.kt)("p",{parentName:"li"},"You can download the binary package of EventBridge from ",(0,a.kt)("a",{parentName:"p",href:"https://www.apache.org/dyn/closer.cgi?path=rocketmq/rocketmq-eventbridge/1.0.0/rocketmq-eventbridge-1.0.0-bin-release.zip"},"here")," : rocketmq-eventbridge-xxx-bin-release.zip. After downloading, unzip it and you will get a directory as follows:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"/rocketmq-eventbridge-xxx-bin-release/\n|\u2014\u2014bin\n|   |\u2014\u2014runserver.sh\n|   |\u2014\u2014eventbridge.sh\n|\u2014\u2014config\n|   |\u2014\u2014application.properties\n|\u2014\u2014jar\n|   |\u2014\u2014rocketmq-eventbridge.jar\n")))),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Configuring EventBridge"),(0,a.kt)("p",{parentName:"li"},"Before running, we need to configure the runtime environment for EventBridge by modifying the config/application.properties file, as follows\uff1a"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"# Mysql database address\nspring.datasource.url=jdbc:mysql://xxxx:3306/xxxx?characterEncoding=utf8\nspring.datasource.username=xxx\nspring.datasource.password=xxxx\n\n# RocketMQ nameserver address\nrocketmq.namesrvAddr=xxxxx:9876\n\n# RocketMQ cluster name\nrocketmq.cluster.name=DefaultCluster\n\n# RocketMQ Connect address\nrocketmq.connect.endpoint=xxxxxx:8082\n\n# log default configuration\nlog.path=\uff5e\nlog.level=INFO\napp.name=rocketmq-eventbridge\n"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Start EventBridge"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"sh bin/eventbridge.sh start \n")),(0,a.kt)("p",{parentName:"li"},"The log directory by default is located at ~ /rocketmq-eventbridge/rocketmq-eventbridge.log, it can be modified by changing the log.path and app.name. The log can be used to check if the service has started properly.\uff1a\n",(0,a.kt)("img",{alt:"img.png",src:n(77353).Z,width:"3540",height:"612"}))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Test EventBridge"))),(0,a.kt)("p",null,"Once the service is started, we can use the following demo cases to test and verify EventBridge."),(0,a.kt)("h2",{id:"demo"},"Demo"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Create Event Bus"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-text"},'POST /bus/createEventBus HTTP/1.1\nHost: demo.eventbridge.com\nContent-Type: application/json; charset=utf-8\n{\n"eventBusName":"demo-bus",\n"description":"a demo bus."\n}\n'))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Create Source Event"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},'POST /source/createEventSource HTTP/1.1\nHost: demo.eventbridge.com\nContent-Type: application/json; charset=utf-8\n{\n"eventBusName":"demo-bus",\n"eventSourceName":"demo-source",\n"description":"A demo source."\n}\n'))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Create Event Rules"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},'POST /rule/createEventRule HTTP/1.1\nHost: demo.eventbridge.com\nContent-Type: application/json; charset=utf-8\n{\n  "eventBusName":"demo-bus",\n  "eventRuleName":"demo-rule",\n  "description":"A demo rule.",\n  "filterPattern":"{}"\n}\n'))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Create Event Target"),(0,a.kt)("p",{parentName:"li"},"Create an event target that delivers to EventBridge in the cloud."),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},'POST /target/createEventTargets HTTP/1.1\nHost: demo.eventbridge.com\nContent-Type: application/json; charset=utf-8\n{\n    "eventBusName":"demo-bus",\n    "eventRuleName":"demo-rule",\n    "eventTargets":[\n            {\n            "eventTargetName":"eventbridge-target",\n            "className":"acs.eventbridge",\n                "config":{\n                "RegionId":"cn-hangzhou",\n                "AliyunEventBus":"rocketmq-eventbridge"\n                }\n            }\n        ]\n}\n')),(0,a.kt)("p",{parentName:"li"},"Creating an event target that delivers notifications to a DingTalk robot\uff1a"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},'POST /target/createEventTargets HTTP/1.1\nHost: demo.eventbridge.com\nContent-Type: application/json; charset=utf-8\n{\n    "eventBusName":"demo-bus",\n    "eventRuleName":"demo-rule",\n    "eventTargets":[\n        {\n            "eventTargetName":"dingtalk-target",\n            "className":"acs.dingtalk",\n            "config":{\n            "WebHook":"https://oapi.dingtalk.com/robot/send?access_token=b43a54b702314415c2acdae97eda1e092528b7a9dddb31510a5b4430be2ef867",\n            "SecretKey":"SEC53483bf496b8f9e0b4ab0ab669d422208e6ccfaedfd5120ea6b8426b9ecd47aa",\n            "Body":"{\\"template\\":\\"{\\\\\\"text\\\\\\":{\\\\\\"content\\\\\\":\\\\\\"${content}\\\\\\"},\\\\\\"msgtype\\\\\\":\\\\\\"text\\\\\\"}\\",\\"form\\":\\"TEMPLATE\\",\\"value\\":\\"{\\\\\\"content\\\\\\":\\\\\\"$.data.body\\\\\\"}\\"}"\n            }\n        }\n    ]\n}\n'))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Send Event to EventBus"),(0,a.kt)("p",{parentName:"li"},"Finally, we will send an event through the API and verify if the Target endpoint receives the corresponding event as expected."),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},'POST /putEvents HTTP/1.1\nHost: demo.eventbridge.com\nContent-Type:"application/cloudevents+json; charset=UTF-8"\n{\n  "specversion" : "1.0",\n  "type" : "com.github.pull_request.opened",\n  "source" : "https://github.com/cloudevents/spec/pull",\n  "subject" : "123",\n  "id" : "A234-1234-1234",\n  "time" : "2018-04-05T17:31:00Z",\n  "datacontenttype" : "application/json",\n  "data" : {\n    "body":"demo"\n  },\n  "aliyuneventbusname":"demo-bus"\n}\n')))))}u.isMDXComponent=!0},77353:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/Started-284e7a8c9a25eecdff4498d093654fac.png"}}]);